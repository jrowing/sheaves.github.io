---
layout: post
title: Lattice of Subgroups
tag: Algebra
---

This is the first in a series of posts on visualizing groups via their [lattice of subgroups](http://en.wikipedia.org/wiki/Lattice_of_subgroups).

![Lattice of the dihedral group $D_4$](/images/D4Lattice.png "Lattice of the dihedral group $D_4$. Normal subgroups are shown in green.")

<!--more-->

# Displaying the Lattice of Subgroups

One way of getting a better understanding of a group is by considering its subgroups. The lattice of subgroups (more precisely, the [Hasse diagram](http://en.wikipedia.org/wiki/Hasse_diagram) of this lattice) gives us a way to visualize how these subgroups relate to each other and to their parent group. Here's how to do it in Sage:

<div class="sage">
  <script type="text/x-sage">
# Define group and generate list of subgroups of the group
G = DihedralGroup(4)
subgroups = G.subgroups()

# Define f(h,k) = True iff h is a subgroup of k
f = lambda h,k: h.is_subgroup(k)

# Define and display the poset
P = Poset((subgroups, f))
P.plot(label_elements=False)
  </script>
</div>

By default, the vertex labels of the Hasse diagram will be the description of the object that the vertex represents. In our case, something like `Subgroup of (Dihedral group of order 8 as a permutation group) generated by [(1,2)(3,4)]`, which would be way too long to display nicely. Because of this, in the above code, I've decided not to label the vertices. 

# Relabelling vertices
Without labels, it can be hard to tell what subgroups we're looking at. We can define new labels for these vertices by defining a [dictionary](https://docs.python.org/2/tutorial/datastructures.html#dictionaries) where the keys are the original vertices and their corresponding values are our new labels.

## Labelling by generators
One way to tell what the subgroups are is to look at their generators:

<div class="sage">
  <script type="text/x-sage">
G = DihedralGroup(4)
P = Poset((G.subgroups(), lambda h,k: h.is_subgroup(k)))
  
# Define labels
label_by_gens = {x : str(x.gens())[1:-1] for x in G.subgroups()}

# Display the poset with new labels
P.plot(label_elements = True, element_labels = label_by_gens)
  </script>
</div>

## Labelling by cardinalities
Or we could label the subgroups by their cardinalities:

<div class="sage">
  <script type="text/x-sage">
G = DihedralGroup(4)
P = Poset((G.subgroups(), lambda h,k: h.is_subgroup(k)))
  
label_by_size = {x : str(len(x)) for x in G.subgroups()}
P.plot(label_elements = True, element_labels = label_by_size)
  </script>
</div>

If you ran the preceding code, you probably encountered an error message. This is because Sage currently requires that vertex labels be injective i.e. distinct vertices must have distinct labels. There's a quick but slightly ugly fix for this: just pad spaces around the labels to make them all unique:

<div class = "sage">
  <script type="text/x-sage">
G = DihedralGroup(4)
P = Poset((G.subgroups(), lambda h,k: h.is_subgroup(k)))
  
label_by_size = {G.subgroups()[i] :"." + " "*i + str(len(G.subgroups()[i])) + " "*i + "." for i in range(len(G.subgroups()))}
P.plot(label_elements = True, element_labels = label_by_size)
  </script>
</div>

## Labelling by structure description
However, unless you are already very familiar with many examples of finite groups, just knowing the cardinality or the generators doesn't tell you very much about the subgroup. 

Fortunately, Sage has a method for describing the structure of a small group: `H.structure_description()` where `H` is the group in question.

*Un*fortunately, this method requires the [GAP](http://www.gap-system.org/) group database, which is not installed with the Sagecell version of Sage. However, the free [SageMathCloud](https://cloud.sagemath.com/) service's installation of Sage *does* have the group database installed, so you can try the following code there. This code was used to produce the image at the start of this post:

<div class="sage">
  <script type="text/x-sage">
# Define group and list of subgroups
G = DihedralGroup(4)
subgroups = G.subgroups()

# Label using structure_description()
label = {subgroups[i]: "." +" "*(0+i) + subgroups[i].structure_description()  + " "*(0+i) + "." for i in range(len(subgroups))}

# Color normal subgroups green and the rest pink
colors = {'lightgreen':[label[x] for x in subgroups if x.is_normal()],
          'pink':[label[x] for x in subgroups if not x.is_normal()]
         }

# Display poset
G_Poset = Poset((subgroups,lambda h,k: h.is_subgroup(k)))
G_Poset.plot(vertex_colors = colors, element_labels = label, vertex_size= 800, vertex_shape='H').show()
  </script>
</div>

Try playing around with different groups and different labelling methods!

<div id="auto">
  <script type="text/x-sage">
# Some small groups
KQ   = [KleinFourGroup(), QuaternionGroup()]
Symm = [SymmetricGroup(N) for N in [1,2,3]]
Alte = [AlternatingGroup(N) for N in [3,4]]
Cycl = [CyclicPermutationGroup(N) for N in [2,4,6,8,9,12,30,60]]
Dihe = [DihedralGroup(N) for N in range(1,9)]

group_list = KQ + Symm + Alte + Cycl + Dihe

@interact
def subgroup_lattices(Group = selector(values = group_list, buttons=False),
                      Label = selector(values =['None','Generators', 'Cardinality','Structure Description (only in SageMathCloud)'], default='Cardinality', buttons=False)):
    # Define group and list of subgroups
    G = Group
    subgroups = G.subgroups()
    
    # Define labels
    label_elements = True
    if Label == 'None':
        label_elements = False
        element_labels = None
    elif Label == 'Generators':        
        element_labels = {x : str(x.gens())[1:-1] for x in subgroups}
    elif Label == 'Cardinality':
        element_labels = {subgroups[i] : "." + " "*i + str(len(subgroups[i])) + " "*i + "." for i in range(len(subgroups))}
    elif Label == 'Structure Description (only in SageMathCloud)':
        element_labels = {subgroups[i]: "." +" "*(0+i) + subgroups[i].structure_description()  + " "*(0+i) + "." for i in range(len(subgroups))}
    
    # Define and display poset
    P = Poset((subgroups, lambda h,k: h.is_subgroup(k) ))
    P.plot(label_elements=label_elements, element_labels = element_labels).show()    
  </script>
</div>
